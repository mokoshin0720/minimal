FROM python:3

ARG my_app_version
ENV VERSION_APP=$my_app_version

# 環境変数がechoで呼び出されるかのテスト
RUN echo $HOME
RUN echo ${VERSION_APP}
RUN echo ${my_app_version}

RUN set

WORKDIR /development/minimalist

ADD requirements.txt /development/minimalist

RUN pip install -r requirements.txt

ADD . /development/minimalist

COPY . .
RUN python manage.py collectstatic --noinput
CMD ["web:", "gunicorn", "minimalist.wsgi"]